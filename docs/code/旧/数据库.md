# 1 数据库系统概述

## 1.2 数据库-数据库管理系统-数据库系统

#### 文件系统管理数据存在的局限

- 数据冗余与非一致性
- 程序依赖于数据
- 数据孤立
- 完整性问题
- 更新的原子性保持问题
- 并发访问
- 安全性问题

#### 数据库

是长期存储在计算机内有组织的、大量相关联的、可共享的数据集合

#### 数据和信息的区别

- 数据是信息的符号表示或称为载体；信息则是数据的内涵，是对数据语义的解释
- 数据代表了信息，二信息只有通过数据形式才能被计算机所理解和接受

#### 数据库管理系统

它为用户提供一个可以方便地、有效地存取数据库信息的环境

#### 数据库方法的特点

- 数据抽象
- 可靠性
- 高效

## 1.3 数据库系统三层结构

#### 数据库系统的体系结构受运行于数据库的底层计算机系统的影响

- 改变存储结构而不影响用户视图
- 物理存储的改变不影响数据库的内部结构
- 概念结构的改变不应影响所有用户

#### DBMS管理数据的三个层次

- External Level 外部层   **某一用户能够看到与处理的数据**
- Conceptual Level 概念层   **从全局角度理解/管理的数据,** **含相应的关联约束**
- Internal Level 内部层   **存储在介质上的数据，含存储路径、存储方式** **、索引方式等**

#### 数据独立性 

##### 概念数据独立性

- 概念模式变化不会影响外模式

##### 物理数据独立性

- 概念模式不受内模式的影响
- 内模式改变不要求概念模式与外模式也改变

## 1.4 数据模型

#### 数据模型的概念

数据模型是描述数据、数据间联系、数据语义以及约束的工具集合

#### 数据模型由三部分组成

- 数据结构
- 数据操纵
- 完整性约束

#### 主要数据模型

- 实体——联系模型（E-R）
- 关系模型
- 面向对象模型
- XML半结构化模型，面向数据交换而提出，在互联网上得到广泛应用
- 早期
   - 网络模型
   - 层次模型

#### 关系模型

所有模式都可抽象为表(Table)的形式(数据结构)，而每一个具体的模 式都是拥有不同列名的具体的表，对这种表形式的数据有相应操作和约束

关系模型是数据库模型，具有数据模型的基本操作

- 数据结构
- 数据操纵
- 数据约束

## 1.5 数据库的发展



## 本章重点

![image-20210305141743731](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210305141743731.png)



# 2 关系数据库

## 2.1 关系数据库结构

### 关系模型的三个要素

基本结构：Relation/Table

基本操作：Relation Operator​

​	基本的：并∪、差-、广义积×、选择σ、投影π

​	扩展的：交∩、连接$\bowtie$、除÷

完整性约束：实体完整性、参照完整性和用户自定义的完整性

### 2.1.3 关系模式

#### 关系模式

属性与域名对的集合，对结构的描述

关系模型是对型的描述（关系模式是型，关系是值），是对关系表中每个列的描述。关系模式需要给出关系名、每个属性的名称、属性的域及属性和域之间的映射关系。

#### 关系数据库模式

一系列关系模式，每个有不同的名字

### 2.1.4 关系实例

#### 关系实例

某特定时刻关系的值

- 元组（行，记录）
- 目，度-属性个数
- 基数-元组个数
- ![image-20210305151803327](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210305151803327.png)

### 2.1.5 数据库

#### 关系数据库

不重名规范化关系的集合



### 2.1.6 表的性质

- 关系不重名
- 单元格不可再分
- 属性不重名
- 一个属性来自同一个域
- 元组不重复
- 列的顺序无所谓
- 行的顺序原则上无所谓（实际上会影响元组访问效率）

### 2.1.7 键

#### Super Key（SK）（超关键字；超码）

能唯一便视一行的一个或多个属性

#### Candidate Key （CK）（候选码）

超码K的的任意子集不再是超码

#### Primary Key （PK）（主码）

数据库设计者选中用来在同一关系中区分不同元组的候选码

- 一个关系只能由一个主码
- 一般选择值不变或者很少变化的属性
- 考虑应用语义
- 考虑比较值的存储需求与代价
   - 证书通常比长字符串好
   - 单属性主码比复合主码好

#### Alternate Key（AK） （备选码）

其他的就是备选码

#### Foreign Key （外键）

一个关系（参照关系）中的属性是另一关系（被参照关系）的主码，该属性为参照关系的外码

![image-20210305153123039](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210305153123039.png)

### 2.1.8 关系模型的完整性

#### 关系模型的完整性是对关系的某种约束条件

三类完整性约束：书体完整性，参照完整性和用户自定义完整性。其中前两种完整性是关系模型必须满足的完整性约束

#### 实体完整性

- 码值唯一
- 基本表主码的诸属性均不能为空值

#### 参照完整性

外码取参照码值或取空值

#### 用户定义的完整性

用户或数据库管理者指定的其他规则

**任何关系都必须保证实体与参照完整性约束**



## 2.2 基本关系代数操作

#### 六个基本操作符号

- 选择 $\sigma$
- 投影 $\Pi$
- 并 $\cup$
- 集合差 -
- 笛卡尔积 $\times$ 
- 更名 $\rho$

#### 选择 $\sigma$

选择满足条件的某一行

![image-20210309082116252](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210309082116252.png)

#### 投影 $\Pi$

得到一个含有列出属性的关系

只保留一些需要的信息

对列进行操作时使用

![image-20210309082102701](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210309082102701.png)

#### 并 $\cup$

两个元组具有相同的数字或属性

将2个元组进行合并和去重操作

![image-20210309082040653](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210309082040653.png)

#### 集合差 -

r - s = { t | t $\in$ r and t $\notin$ s }

![image-20210309082453043](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210309082453043.png)

#### 笛卡尔积 $\times$ 

r $\times$ s = { t q | t $\in$ r and q $\in$ s }

$r \times s = \lbrace t,q | t \in r ,and,q \in s \rbrace $

![image-20210309083039847](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210309083039847.png)

![](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210309083807637.png)

#### 更名 $\rho$

$\rho _x (E)$ 表示返回表达式E的结果并把名字x赋给他 







## 2.3 附加的关系代数操作

#### 交 $\cap$

$r \cap s = \{ t| t \in r\ and\ t \in s \}$

$r \cap s = r - (r - s)$

![image-20210316081517076](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210316081517076.png)



自然连接 $\bowtie$

![image-20210316082125332](C:\Users\86135\AppData\Roaming\Typora\typora-user-images\image-20210316082125332.png)

#### 除法 $\div$

































## 2.4 扩展的关系代数操作







## 2.5 数据库修改

### 2.5.1 删除 delete

### 2.5.2 插入 insert

向数据库插入一个数据

### 2.5.3 更新 update

只改变元组中的某个值



## 2.6 元组关系演算与域关系演算

#### 关系演算

一种非过程化查询语言，只描述所需信息，不给出获取信息的过程

是以数理逻辑中的为此演算为基础

按照为此变量的不同，可分为元组关系演算和域关系演算	



















# 3 SQL





























