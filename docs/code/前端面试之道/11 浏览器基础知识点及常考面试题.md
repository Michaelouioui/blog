# æµè§ˆå™¨åŸºç¡€çŸ¥è¯†ç‚¹åŠå¸¸è€ƒé¢è¯•é¢˜

è¿™ä¸€ç« èŠ‚æˆ‘ä»¬å°†ä¼šæ¥å­¦ä¹ æµè§ˆå™¨çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬ï¼šäº‹ä»¶æœºåˆ¶ã€è·¨åŸŸã€å­˜å‚¨ç›¸å…³ï¼Œè¿™å‡ ä¸ªçŸ¥è¯†ç‚¹ä¹Ÿæ˜¯é¢è¯•ç»å¸¸ä¼šè€ƒåˆ°çš„å†…å®¹ã€‚

## äº‹ä»¶æœºåˆ¶

```!
æ¶‰åŠé¢è¯•é¢˜ï¼šäº‹ä»¶çš„è§¦å‘è¿‡ç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼ŸçŸ¥é“ä»€ä¹ˆæ˜¯äº‹ä»¶ä»£ç†å˜›ï¼Ÿ
```

### äº‹ä»¶è§¦å‘ä¸‰é˜¶æ®µ

äº‹ä»¶è§¦å‘æœ‰ä¸‰ä¸ªé˜¶æ®µï¼š

- `window` å¾€äº‹ä»¶è§¦å‘å¤„ä¼ æ’­ï¼Œé‡åˆ°æ³¨å†Œçš„æ•è·äº‹ä»¶ä¼šè§¦å‘
- ä¼ æ’­åˆ°äº‹ä»¶è§¦å‘å¤„æ—¶è§¦å‘æ³¨å†Œçš„äº‹ä»¶
- ä»äº‹ä»¶è§¦å‘å¤„å¾€ `window` ä¼ æ’­ï¼Œé‡åˆ°æ³¨å†Œçš„å†’æ³¡äº‹ä»¶ä¼šè§¦å‘

äº‹ä»¶è§¦å‘ä¸€èˆ¬æ¥è¯´ä¼šæŒ‰ç…§ä¸Šé¢çš„é¡ºåºè¿›è¡Œï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹ä¾‹ï¼Œ**å¦‚æœç»™ä¸€ä¸ª `body` ä¸­çš„å­èŠ‚ç‚¹åŒæ—¶æ³¨å†Œå†’æ³¡å’Œæ•è·äº‹ä»¶ï¼Œäº‹ä»¶è§¦å‘ä¼šæŒ‰ç…§æ³¨å†Œçš„é¡ºåºæ‰§è¡Œã€‚**

```js
// ä»¥ä¸‹ä¼šå…ˆæ‰“å°å†’æ³¡ç„¶åæ˜¯æ•è·
node.addEventListener(
  'click',
  event => {
    console.log('å†’æ³¡')
  },
  false
)
node.addEventListener(
  'click',
  event => {
    console.log('æ•è· ')
  },
  true
)
```

### æ³¨å†Œäº‹ä»¶

é€šå¸¸æˆ‘ä»¬ä½¿ç”¨ `addEventListener` æ³¨å†Œäº‹ä»¶ï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æ˜¯å¸ƒå°”å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ã€‚å¯¹äºå¸ƒå°”å€¼ `useCapture` å‚æ•°æ¥è¯´ï¼Œè¯¥å‚æ•°é»˜è®¤å€¼ä¸º `false` ï¼Œ`useCapture` å†³å®šäº†æ³¨å†Œçš„äº‹ä»¶æ˜¯æ•è·äº‹ä»¶è¿˜æ˜¯å†’æ³¡äº‹ä»¶ã€‚å¯¹äºå¯¹è±¡å‚æ•°æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ä¸ªå±æ€§

- `capture`ï¼šå¸ƒå°”å€¼ï¼Œå’Œ `useCapture` ä½œç”¨ä¸€æ ·
- `once`ï¼šå¸ƒå°”å€¼ï¼Œå€¼ä¸º `true` è¡¨ç¤ºè¯¥å›è°ƒåªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè°ƒç”¨åä¼šç§»é™¤ç›‘å¬
- `passive`ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ°¸è¿œä¸ä¼šè°ƒç”¨ `preventDefault`

ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬åªå¸Œæœ›äº‹ä»¶åªè§¦å‘åœ¨ç›®æ ‡ä¸Šï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨ `stopPropagation` æ¥é˜»æ­¢äº‹ä»¶çš„è¿›ä¸€æ­¥ä¼ æ’­ã€‚é€šå¸¸æˆ‘ä»¬è®¤ä¸º `stopPropagation` æ˜¯ç”¨æ¥é˜»æ­¢äº‹ä»¶å†’æ³¡çš„ï¼Œå…¶å®è¯¥å‡½æ•°ä¹Ÿå¯ä»¥é˜»æ­¢æ•è·äº‹ä»¶ã€‚`stopImmediatePropagation` åŒæ ·ä¹Ÿèƒ½å®ç°é˜»æ­¢äº‹ä»¶ï¼Œä½†æ˜¯è¿˜èƒ½é˜»æ­¢è¯¥äº‹ä»¶ç›®æ ‡æ‰§è¡Œåˆ«çš„æ³¨å†Œäº‹ä»¶ã€‚

```js
node.addEventListener(
  'click',
  event => {
    event.stopImmediatePropagation()
    console.log('å†’æ³¡')
  },
  false
)
// ç‚¹å‡» node åªä¼šæ‰§è¡Œä¸Šé¢çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¸ä¼šæ‰§è¡Œ
node.addEventListener(
  'click',
  event => {
    console.log('æ•è· ')
  },
  true
)
```

### äº‹ä»¶ä»£ç†

å¦‚æœä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„å­èŠ‚ç‚¹æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œé‚£ä¹ˆå­èŠ‚ç‚¹éœ€è¦æ³¨å†Œäº‹ä»¶çš„è¯**åº”è¯¥æ³¨å†Œåœ¨çˆ¶èŠ‚ç‚¹ä¸Š**

```html
<ul id="ul">
	<li>1</li>
    <li>2</li>
	<li>3</li>
	<li>4</li>
	<li>5</li>
</ul>
<script>
	let ul = document.querySelector('#ul')
	ul.addEventListener('click', (event) => {
		console.log(event.target);
	})
</script>
```

äº‹ä»¶ä»£ç†çš„æ–¹å¼ç›¸è¾ƒäºç›´æ¥ç»™ç›®æ ‡æ³¨å†Œäº‹ä»¶æ¥è¯´ï¼Œæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š

- èŠ‚çœå†…å­˜
- ä¸éœ€è¦ç»™å­èŠ‚ç‚¹æ³¨é”€äº‹ä»¶

## è·¨åŸŸ

```!
æ¶‰åŠé¢è¯•é¢˜ï¼šä»€ä¹ˆæ˜¯è·¨åŸŸï¼Ÿä¸ºä»€ä¹ˆæµè§ˆå™¨è¦ä½¿ç”¨åŒæºç­–ç•¥ï¼Ÿä½ æœ‰å‡ ç§æ–¹å¼å¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜ï¼Ÿäº†è§£é¢„æ£€è¯·æ±‚å˜›ï¼Ÿ
```

å› ä¸ºæµè§ˆå™¨å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæœ‰åŒæºç­–ç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåè®®ã€åŸŸåæˆ–è€…ç«¯å£æœ‰ä¸€ä¸ªä¸åŒå°±æ˜¯è·¨åŸŸï¼ŒAjax è¯·æ±‚ä¼šå¤±è´¥ã€‚

**é‚£ä¹ˆæ˜¯å‡ºäºä»€ä¹ˆå®‰å…¨è€ƒè™‘æ‰ä¼šå¼•å…¥è¿™ç§æœºåˆ¶å‘¢ï¼Ÿ** å…¶å®ä¸»è¦æ˜¯ç”¨æ¥é˜²æ­¢ CSRF æ”»å‡»çš„ã€‚ç®€å•ç‚¹è¯´ï¼ŒCSRF æ”»å‡»æ˜¯åˆ©ç”¨ç”¨æˆ·çš„ç™»å½•æ€å‘èµ·æ¶æ„è¯·æ±‚ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰åŒæºç­–ç•¥çš„æƒ…å†µä¸‹ï¼ŒA ç½‘ç«™å¯ä»¥è¢«ä»»æ„å…¶ä»–æ¥æºçš„ Ajax è®¿é—®åˆ°å†…å®¹ã€‚å¦‚æœä½ å½“å‰ A ç½‘ç«™è¿˜å­˜åœ¨ç™»å½•æ€ï¼Œé‚£ä¹ˆå¯¹æ–¹å°±å¯ä»¥é€šè¿‡ Ajax è·å¾—ä½ çš„ä»»ä½•ä¿¡æ¯ã€‚å½“ç„¶è·¨åŸŸå¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢ CSRFã€‚

**ç„¶åæˆ‘ä»¬æ¥è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œè¯·æ±‚è·¨åŸŸäº†ï¼Œé‚£ä¹ˆè¯·æ±‚åˆ°åº•å‘å‡ºå»æ²¡æœ‰ï¼Ÿ** è¯·æ±‚å¿…ç„¶æ˜¯å‘å‡ºå»äº†ï¼Œä½†æ˜¯æµè§ˆå™¨æ‹¦æˆªäº†å“åº”ã€‚ä½ å¯èƒ½ä¼šç–‘é—®æ˜æ˜é€šè¿‡è¡¨å•çš„æ–¹å¼å¯ä»¥å‘èµ·è·¨åŸŸè¯·æ±‚ï¼Œä¸ºä»€ä¹ˆ Ajax å°±ä¸ä¼šã€‚å› ä¸ºå½’æ ¹ç»“åº•ï¼Œè·¨åŸŸæ˜¯ä¸ºäº†é˜»æ­¢ç”¨æˆ·è¯»å–åˆ°å¦ä¸€ä¸ªåŸŸåä¸‹çš„å†…å®¹ï¼ŒAjax å¯ä»¥è·å–å“åº”ï¼Œæµè§ˆå™¨è®¤ä¸ºè¿™ä¸å®‰å…¨ï¼Œæ‰€ä»¥æ‹¦æˆªäº†å“åº”ã€‚ä½†æ˜¯è¡¨å•å¹¶ä¸ä¼šè·å–æ–°çš„å†…å®¹ï¼Œæ‰€ä»¥å¯ä»¥å‘èµ·è·¨åŸŸè¯·æ±‚ã€‚åŒæ—¶ä¹Ÿè¯´æ˜äº†è·¨åŸŸå¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢ CSRFï¼Œå› ä¸ºè¯·æ±‚æ¯•ç«Ÿæ˜¯å‘å‡ºå»äº†ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¥å­¦ä¹ å‡ ç§å¸¸è§çš„æ–¹å¼æ¥è§£å†³è·¨åŸŸçš„é—®é¢˜ã€‚

### JSONP

JSONP çš„åŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨ `<script>` æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ `<script>` æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®å½“éœ€è¦é€šè®¯æ—¶ã€‚

```js
<script src="http://domain/api?param1=a&param2=b&callback=jsonp"></script>
<script>
    function jsonp(data) {
    	console.log(data)
	}
</script>    
```

JSONP ä½¿ç”¨ç®€å•ä¸”å…¼å®¹æ€§ä¸é”™ï¼Œä½†æ˜¯åªé™äº `get` è¯·æ±‚ã€‚

åœ¨å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°å¤šä¸ª JSONP è¯·æ±‚çš„å›è°ƒå‡½æ•°åæ˜¯ç›¸åŒçš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦è‡ªå·±å°è£…ä¸€ä¸ª JSONPï¼Œä»¥ä¸‹æ˜¯ç®€å•å®ç°

```js
function jsonp(url, jsonpCallback, success) {
  let script = document.createElement('script')
  script.src = url
  script.async = true
  script.type = 'text/javascript'
  window[jsonpCallback] = function(data) {
    success && success(data)
  }
  document.body.appendChild(script)
}
jsonp('http://xxx', 'callback', function(value) {
  console.log(value)
})
```

### CORS

CORS éœ€è¦æµè§ˆå™¨å’Œåç«¯åŒæ—¶æ”¯æŒã€‚IE 8 å’Œ 9 éœ€è¦é€šè¿‡ `XDomainRequest` æ¥å®ç°ã€‚

æµè§ˆå™¨ä¼šè‡ªåŠ¨è¿›è¡Œ CORS é€šä¿¡ï¼Œå®ç° CORS é€šä¿¡çš„å…³é”®æ˜¯åç«¯ã€‚åªè¦åç«¯å®ç°äº† CORSï¼Œå°±å®ç°äº†è·¨åŸŸã€‚

æœåŠ¡ç«¯è®¾ç½® `Access-Control-Allow-Origin` å°±å¯ä»¥å¼€å¯ CORSã€‚ è¯¥å±æ€§è¡¨ç¤ºå“ªäº›åŸŸåå¯ä»¥è®¿é—®èµ„æºï¼Œå¦‚æœè®¾ç½®é€šé…ç¬¦åˆ™è¡¨ç¤ºæ‰€æœ‰ç½‘ç«™éƒ½å¯ä»¥è®¿é—®èµ„æºã€‚

è™½ç„¶è®¾ç½® CORS å’Œå‰ç«¯æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯é€šè¿‡è¿™ç§æ–¹å¼è§£å†³è·¨åŸŸé—®é¢˜çš„è¯ï¼Œä¼šåœ¨å‘é€è¯·æ±‚æ—¶å‡ºç°ä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸º**ç®€å•è¯·æ±‚å’Œå¤æ‚è¯·æ±‚**ã€‚

#### ç®€å•è¯·æ±‚

ä»¥ Ajax ä¸ºä¾‹ï¼Œå½“æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œä¼šè§¦å‘ç®€å•è¯·æ±‚

1. ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€ï¼š
   - `GET`
   - `HEAD`
   - `POST`
2. `Content-Type` çš„å€¼ä»…é™äºä¸‹åˆ—ä¸‰è€…ä¹‹ä¸€ï¼š
   - `text/plain`
   - `multipart/form-data`
   - `application/x-www-form-urlencoded`

è¯·æ±‚ä¸­çš„ä»»æ„ `XMLHttpRequestUpload` å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼› `XMLHttpRequestUpload` å¯¹è±¡å¯ä»¥ä½¿ç”¨ `XMLHttpRequest.upload` å±æ€§è®¿é—®ã€‚

#### å¤æ‚è¯·æ±‚

é‚£ä¹ˆå¾ˆæ˜¾ç„¶ï¼Œä¸ç¬¦åˆä»¥ä¸Šæ¡ä»¶çš„è¯·æ±‚å°±è‚¯å®šæ˜¯å¤æ‚è¯·æ±‚äº†ã€‚

å¯¹äºå¤æ‚è¯·æ±‚æ¥è¯´ï¼Œé¦–å…ˆä¼šå‘èµ·ä¸€ä¸ªé¢„æ£€è¯·æ±‚ï¼Œè¯¥è¯·æ±‚æ˜¯ `option` æ–¹æ³•çš„ï¼Œé€šè¿‡è¯¥è¯·æ±‚æ¥çŸ¥é“æœåŠ¡ç«¯æ˜¯å¦å…è®¸è·¨åŸŸè¯·æ±‚ã€‚

å¯¹äºé¢„æ£€è¯·æ±‚æ¥è¯´ï¼Œå¦‚æœä½ ä½¿ç”¨è¿‡ Node æ¥è®¾ç½® CORS çš„è¯ï¼Œå¯èƒ½ä¼šé‡åˆ°è¿‡è¿™ä¹ˆä¸€ä¸ªå‘ã€‚

ä»¥ä¸‹ä»¥ express æ¡†æ¶ä¸¾ä¾‹ï¼š

```js
app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*')
  res.header('Access-Control-Allow-Methods', 'PUT, GET, POST, DELETE, OPTIONS')
  res.header(
    'Access-Control-Allow-Headers',
    'Origin, X-Requested-With, Content-Type, Accept, Authorization, Access-Control-Allow-Credentials'
  )
  next()
})
```

è¯¥è¯·æ±‚ä¼šéªŒè¯ä½ çš„ `Authorization` å­—æ®µï¼Œæ²¡æœ‰çš„è¯å°±ä¼šæŠ¥é”™ã€‚

å½“å‰ç«¯å‘èµ·äº†å¤æ‚è¯·æ±‚åï¼Œä½ ä¼šå‘ç°å°±ç®—ä½ ä»£ç æ˜¯æ­£ç¡®çš„ï¼Œè¿”å›ç»“æœä¹Ÿæ°¸è¿œæ˜¯æŠ¥é”™çš„ã€‚å› ä¸ºé¢„æ£€è¯·æ±‚ä¹Ÿä¼šè¿›å…¥å›è°ƒä¸­ï¼Œä¹Ÿä¼šè§¦å‘ `next` æ–¹æ³•ï¼Œå› ä¸ºé¢„æ£€è¯·æ±‚å¹¶ä¸åŒ…å« `Authorization` å­—æ®µï¼Œæ‰€ä»¥æœåŠ¡ç«¯ä¼šæŠ¥é”™ã€‚

æƒ³è§£å†³è¿™ä¸ªé—®é¢˜å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨å›è°ƒä¸­è¿‡æ»¤ `option` æ–¹æ³•å³å¯

```js
res.statusCode = 204
res.setHeader('Content-Length', '0')
res.end()
```

### document.domain

è¯¥æ–¹å¼åªèƒ½ç”¨äº**äºŒçº§åŸŸåç›¸åŒ**çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ `a.test.com` å’Œ `b.test.com` é€‚ç”¨äºè¯¥æ–¹å¼ã€‚

åªéœ€è¦ç»™é¡µé¢æ·»åŠ  `document.domain = 'test.com'` è¡¨ç¤ºäºŒçº§åŸŸåéƒ½ç›¸åŒå°±å¯ä»¥å®ç°è·¨åŸŸ

### postMessage

è¿™ç§æ–¹å¼é€šå¸¸ç”¨äºè·å–åµŒå…¥é¡µé¢ä¸­çš„ç¬¬ä¸‰æ–¹é¡µé¢æ•°æ®ã€‚ä¸€ä¸ªé¡µé¢å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªé¡µé¢åˆ¤æ–­æ¥æºå¹¶æ¥æ”¶æ¶ˆæ¯

```js
// å‘é€æ¶ˆæ¯ç«¯
window.parent.postMessage('message', 'http://test.com')
// æ¥æ”¶æ¶ˆæ¯ç«¯
var mc = new MessageChannel()
mc.addEventListener('message', event => {
  var origin = event.origin || event.originalEvent.origin
  if (origin === 'http://test.com') {
    console.log('éªŒè¯é€šè¿‡')
  }
})
```

## å­˜å‚¨

```!
æ¶‰åŠé¢è¯•é¢˜ï¼šæœ‰å‡ ç§æ–¹å¼å¯ä»¥å®ç°å­˜å‚¨åŠŸèƒ½ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼Ÿä»€ä¹ˆæ˜¯ Service Workerï¼Ÿ
```

### cookieï¼ŒlocalStorageï¼ŒsessionStorageï¼ŒindexDB

æˆ‘ä»¬å…ˆæ¥é€šè¿‡è¡¨æ ¼å­¦ä¹ ä¸‹è¿™å‡ ç§å­˜å‚¨æ–¹å¼çš„åŒºåˆ«

| ç‰¹æ€§         | cookie                                     | localStorage             | sessionStorage | indexDB                  |
| ------------ | ------------------------------------------ | ------------------------ | -------------- | ------------------------ |
| æ•°æ®ç”Ÿå‘½å‘¨æœŸ | ä¸€èˆ¬ç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´         | é™¤éè¢«æ¸…ç†ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨ | é¡µé¢å…³é—­å°±æ¸…ç† | é™¤éè¢«æ¸…ç†ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨ |
| æ•°æ®å­˜å‚¨å¤§å° | 4K                                         | 5M                       | 5M             | æ— é™                     |
| ä¸æœåŠ¡ç«¯é€šä¿¡ | æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨ header ä¸­ï¼Œå¯¹äºè¯·æ±‚æ€§èƒ½å½±å“ | ä¸å‚ä¸                   | ä¸å‚ä¸         | ä¸å‚ä¸                   |

ä»ä¸Šè¡¨å¯ä»¥çœ‹åˆ°ï¼Œ`cookie` å·²ç»ä¸å»ºè®®ç”¨äºå­˜å‚¨ã€‚å¦‚æœæ²¡æœ‰å¤§é‡æ•°æ®å­˜å‚¨éœ€æ±‚çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ `localStorage` å’Œ `sessionStorage` ã€‚å¯¹äºä¸æ€ä¹ˆæ”¹å˜çš„æ•°æ®å°½é‡ä½¿ç”¨ `localStorage` å­˜å‚¨ï¼Œå¦åˆ™å¯ä»¥ç”¨ `sessionStorage` å­˜å‚¨ã€‚

å¯¹äº `cookie` æ¥è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ³¨æ„å®‰å…¨æ€§ã€‚

| å±æ€§      | ä½œç”¨                                                         |
| --------- | ------------------------------------------------------------ |
| value     | å¦‚æœç”¨äºä¿å­˜ç”¨æˆ·ç™»å½•æ€ï¼Œåº”è¯¥å°†è¯¥å€¼åŠ å¯†ï¼Œä¸èƒ½ä½¿ç”¨æ˜æ–‡çš„ç”¨æˆ·æ ‡è¯† |
| http-only | ä¸èƒ½é€šè¿‡ JS è®¿é—® Cookieï¼Œå‡å°‘ XSS æ”»å‡»                       |
| secure    | åªèƒ½åœ¨åè®®ä¸º HTTPS çš„è¯·æ±‚ä¸­æºå¸¦                              |
| same-site | è§„å®šæµè§ˆå™¨ä¸èƒ½åœ¨è·¨åŸŸè¯·æ±‚ä¸­æºå¸¦ Cookieï¼Œå‡å°‘ CSRF æ”»å‡»        |

### Service Worker

Service Worker æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨èƒŒåçš„**ç‹¬ç«‹çº¿ç¨‹**ï¼Œä¸€èˆ¬å¯ä»¥ç”¨æ¥å®ç°ç¼“å­˜åŠŸèƒ½ã€‚ä½¿ç”¨ Service Workerçš„è¯ï¼Œä¼ è¾“åè®®å¿…é¡»ä¸º **HTTPS**ã€‚å› ä¸º Service Worker ä¸­æ¶‰åŠåˆ°è¯·æ±‚æ‹¦æˆªï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨ HTTPS åè®®æ¥ä¿éšœå®‰å…¨ã€‚

Service Worker å®ç°ç¼“å­˜åŠŸèƒ½ä¸€èˆ¬åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼šé¦–å…ˆéœ€è¦å…ˆæ³¨å†Œ Service Workerï¼Œç„¶åç›‘å¬åˆ° `install` äº‹ä»¶ä»¥åå°±å¯ä»¥ç¼“å­˜éœ€è¦çš„æ–‡ä»¶ï¼Œé‚£ä¹ˆåœ¨ä¸‹æ¬¡ç”¨æˆ·è®¿é—®çš„æ—¶å€™å°±å¯ä»¥é€šè¿‡æ‹¦æˆªè¯·æ±‚çš„æ–¹å¼æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ç¼“å­˜ï¼Œå­˜åœ¨ç¼“å­˜çš„è¯å°±å¯ä»¥ç›´æ¥è¯»å–ç¼“å­˜æ–‡ä»¶ï¼Œå¦åˆ™å°±å»è¯·æ±‚æ•°æ®ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªæ­¥éª¤çš„å®ç°ï¼š

```js
// index.js
if (navigator.serviceWorker) {
  navigator.serviceWorker
    .register('sw.js')
    .then(function(registration) {
      console.log('service worker æ³¨å†ŒæˆåŠŸ')
    })
    .catch(function(err) {
      console.log('servcie worker æ³¨å†Œå¤±è´¥')
    })
}
// sw.js
// ç›‘å¬ `install` äº‹ä»¶ï¼Œå›è°ƒä¸­ç¼“å­˜æ‰€éœ€æ–‡ä»¶
self.addEventListener('install', e => {
  e.waitUntil(
    caches.open('my-cache').then(function(cache) {
      return cache.addAll(['./index.html', './index.js'])
    })
  )
})

// æ‹¦æˆªæ‰€æœ‰è¯·æ±‚äº‹ä»¶
// å¦‚æœç¼“å­˜ä¸­å·²ç»æœ‰è¯·æ±‚çš„æ•°æ®å°±ç›´æ¥ç”¨ç¼“å­˜ï¼Œå¦åˆ™å»è¯·æ±‚æ•°æ®
self.addEventListener('fetch', e => {
  e.respondWith(
    caches.match(e.request).then(function(response) {
      if (response) {
        return response
      }
      console.log('fetch source')
    })
  )
})
```

æ‰“å¼€é¡µé¢ï¼Œå¯ä»¥åœ¨å¼€å‘è€…å·¥å…·ä¸­çš„ `Application` çœ‹åˆ° Service Worker å·²ç»å¯åŠ¨äº†!![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dacd9c7895d942578c6326dfc3367e22~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

åœ¨ Cache ä¸­ä¹Ÿå¯ä»¥å‘ç°æˆ‘ä»¬æ‰€éœ€çš„æ–‡ä»¶å·²è¢«ç¼“å­˜

![img](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/3/28/1626b20dfc4fcd26~tplv-t2oaga2asx-zoom-in-crop-mark:1304:0:0:0.awebp)

å½“æˆ‘ä»¬é‡æ–°åˆ·æ–°é¡µé¢å¯ä»¥å‘ç°æˆ‘ä»¬ç¼“å­˜çš„æ•°æ®æ˜¯ä» Service Worker ä¸­è¯»å–çš„

![img](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9d67e7882fef4ab0a22542757b20763e~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp)

## å°ç»“

ä»¥ä¸Šå°±æ˜¯æµè§ˆå™¨åŸºç¡€çŸ¥è¯†ç‚¹çš„å†…å®¹äº†ï¼Œå¦‚æœå¤§å®¶å¯¹äºè¿™ä¸ªç« èŠ‚çš„å†…å®¹å­˜åœ¨ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºä¸æˆ‘äº’åŠ¨ã€‚

ç•™è¨€

![img](https://p9-passport.byteacctimg.com/img/user-avatar/5e41ee1c076d80557fa78839ed4c71c7~300x300.image)

å‘è¡¨è¯„è®º

å…¨éƒ¨è¯„è®ºï¼ˆ68ï¼‰

[![ä¸´æˆ˜çš„å¤´åƒ](https://p6-passport.byteacctimg.com/img/mosaic-legacy/3795/3033762272~300x300.image)](https://juejin.cn/user/2207475080902621)

[ä¸´æˆ˜](https://juejin.cn/user/2207475080902621)

6æœˆå‰

ä»æ·±å…¥ä¸€ç‚¹çš„ä¸œè¥¿å¼€å§‹å°±æ··ç€å†™äº†![[é»‘è„¸]](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/jj_emoji_99.3264111.png)

1

å›å¤

[![ä¸´æˆ˜çš„å¤´åƒ](https://p6-passport.byteacctimg.com/img/mosaic-legacy/3795/3033762272~300x300.image)](https://juejin.cn/user/2207475080902621)

[ä¸´æˆ˜](https://juejin.cn/user/2207475080902621)

6æœˆå‰

jsonp è·¨åŸŸä¹Ÿå†™çš„ä¸å¯¹.

1

å›å¤

[![å‰åŠçš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/501033035378424)

[å‰åŠ![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/501033035378424)

8æœˆå‰

same-siteé”™äº†ï¼Œæ˜¯è·¨ç«™ã€‚

ç‚¹èµ

å›å¤

[![çˆ±æ•²ä»£ç çš„å¤´åƒ](https://p6-passport.byteacctimg.com/img/user-avatar/5fa8c6155fee5a3a0ee29b4e1d7302cc~300x300.image)](https://juejin.cn/user/4353721778045357)

[çˆ±æ•²ä»£ç ](https://juejin.cn/user/4353721778045357)

12æœˆå‰

è·¨åŸŸä¹Ÿæ˜¯ä¸€ç¬”å¸¦è¿‡å•Š

ç‚¹èµ

å›å¤

[![ç†Šå…ˆç”Ÿ~çš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/219558057615998)

[ç†Šå…ˆç”Ÿ~](https://juejin.cn/user/219558057615998)

1å¹´å‰

javascript:(()=>{alert(1)})();

ç‚¹èµ

å›å¤

[![è“é²¸çˆ±å­¦ä¹ çš„å¤´åƒ](https://p3-passport.byteacctimg.com/img/mosaic-legacy/3792/5112637127~300x300.image)](https://juejin.cn/user/2207475077482712)

[è“é²¸çˆ±å­¦ä¹ ](https://juejin.cn/user/2207475077482712)

1å¹´å‰

1.obj = {} 
 
2.window[a]	// a is not defined 
 
3.obj[b]	// b is not defined 
 
4.obj[a]	// a is not defined 
 
5.window.a = 'dpc' 
 
6.obj.b = 'dpc' 
 
7.window[a]	// undefined 
 
8.obj[b]	// b is not defined 
 
9.obj[a]	// undefined 
 
ä½†obj['a']è®¿é—®ä¸åˆ°å€¼ 
 
10.window['a']	// dpc 
 
11.obj['a']	// undefined
======================================
ç–‘çª¦ï¼š 
 
window.a ä¸ window[a] æœ‰ä»€ä¹ˆå«ä¹‰æ€ä¹ˆç”¨ 
 
8.obj[b]	// b is not defined ä¸ºä»€ä¹ˆ 
 
9.obj[a]	// undefined	è·å¾—å·²å®šä¹‰å˜é‡ä¸ºå•¥obj['a']å–ä¸åˆ°å€¼

å±•å¼€

ç‚¹èµ

2

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1626932939873406)

[bobo![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/1626932939873406)

11æœˆå‰

![ğŸ˜‚](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/asset/twemoji/2.6.0/svg/1f602.svg~tplv-t2oaga2asx-image.image) ä½ è¦å­¦çš„è¿˜å¾ˆå¤š

1

å›å¤

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3878732751968583)

[Â©æš´èµ°çš„å¤§ç†Šâ„¢![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/3878732751968583)

7æœˆå‰

window.a = 'dpc' window[a] = window['dpc'] // undefined

ç‚¹èµ

å›å¤

[![å‰ç«¯å¤åŠ›å£«çš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/2770425030652462)

[å‰ç«¯å¤åŠ›å£«![lv-3](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e108c685147dfe1fb03d4a37257fb417.svg)](https://juejin.cn/user/2770425030652462)

å‰ç«¯å·¥ç¨‹å¸ˆ @ å­—èŠ‚è·³åŠ¨2å¹´å‰

httpå’Œhttpsç®—æ˜¯åŒä¸€ç§å†™åè®®å—ï¼Ÿä»…ä»…æ˜¯httpå’Œhttpsä¼šå¯¼è‡´è·¨åŸŸå—ï¼Ÿ

ç‚¹èµ

3

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3456520286124183)

[å˜å¹»ä¸åŒçš„æˆ‘](https://juejin.cn/user/3456520286124183)

2å¹´å‰

ä¸æ˜¯ä¸€ç§åè®®ï¼Œåè®®ã€åŸŸåã€ç«¯å£ä¸‰è€…ä»»æ„ä¸€ä¸ªä¸åŒå°±ä¼šè·¨åŸŸ

ç‚¹èµ

å›å¤

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/483440845920551)

[ä¸¤å¹´1![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/483440845920551)

2å¹´å‰

httpå¯ä»¥è¯·æ±‚httpsçš„è¯·æ±‚ï¼Œä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œäº†ï¼Œæ‰€ä»¥ä¸€èˆ¬å‰åç«¯éƒ½ä¼šä¸Šhttps

ç‚¹èµ

å›å¤

æŸ¥çœ‹æ›´å¤šå›å¤

[![å­Ÿæ€è¡Œçš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1187128287435517)

[å­Ÿæ€è¡Œ![lv-3](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e108c685147dfe1fb03d4a37257fb417.svg)](https://juejin.cn/user/1187128287435517)

å‰ç«¯ @ Tencent2å¹´å‰

å¦‚æœç»™ä¸€ä¸ª body ä¸­çš„å­èŠ‚ç‚¹åŒæ—¶æ³¨å†Œå†’æ³¡å’Œæ•è·äº‹ä»¶ï¼Œäº‹ä»¶è§¦å‘ä¼šæŒ‰ç…§æ³¨å†Œçš„é¡ºåºæ‰§è¡Œã€‚
è¿™ä¸ªåº”è¯¥åªæœ‰ target è§¦å‘å…ƒç´ æ‰ä¼šå­˜åœ¨ï¼Œè§¦å‘å…ƒç´ çš„çˆ¶çº§å…ƒç´ æ˜¯æ­£ç¡®çš„ã€‚

5

å›å¤

[![ä¸æ–­å­¦ä¹ çš„å‰ç«¯å·¥ç¨‹å¸ˆçš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/201965868168279)

[ä¸æ–­å­¦ä¹ çš„å‰ç«¯å·¥ç¨‹å¸ˆ![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/201965868168279)

2å¹´å‰

document.domain è·¨åŸŸä¹Ÿéœ€è¦äºŒè€…çš„åè®®å’Œç«¯å£å·ç›¸åŒ

3

å›å¤

[![Owençš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/2963939080800733)

[Owen](https://juejin.cn/user/2963939080800733)

å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ @ YAME2å¹´å‰

è·¨åŸŸå¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢ CSRFè¿™å¥è¯æ˜¯ä¸æ˜¯æœ‰è¯¯ï¼Œåº”è¯¥æ˜¯åŒæºç­–ç•¥å¹¶ä¸èƒ½å®Œå…¨é˜»æ­¢CSRF

7

å›å¤

[![1608çš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/888061123635367)

[1608![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/888061123635367)

2å¹´å‰

å¤–å±‚div
	å†…å±‚p
var div = document.querySelector('div');
var p = document.querySelector('p');
div.addEventListener('click', function() {console.log("å†’æ³¡")}, false);
div.addEventListener('click', function() {console.log("æ•è·")}, true);
ç‚¹å‡»div, è¾“å‡º å†’æ³¡ï¼Œæ•è·
ç‚¹å‡»p, è¾“å‡ºæ•è·ï¼Œå†’æ³¡

å±•å¼€

1

1

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1662117311677597)

[Nuh123](https://juejin.cn/user/1662117311677597)

1å¹´å‰

æƒ³è¦çš„å°±æ˜¯ä½ è¿™ä¸ª

ç‚¹èµ

å›å¤

[![wenting68456çš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1978776662051255)

[wenting68456](https://juejin.cn/user/1978776662051255)

3å¹´å‰

serviceWorkerçœŸçš„è®²çš„å¤ªéšä¾¿äº†

4

å›å¤

[![éª‘èª“çš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/4371313963829607)

[éª‘èª“](https://juejin.cn/user/4371313963829607)

3å¹´å‰

æµè§ˆå™¨ä»€ä¹ˆæ—¶å€™ä»form disk cache å’Œfrom memory cacheæ¥è·å–èµ„æºï¼Ÿ

ç‚¹èµ

å›å¤

[![è›‡å¤«åº§çš„å¤´åƒ](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3210229683600077)

[è›‡å¤«åº§](https://juejin.cn/user/3210229683600077)

3å¹´å‰

è€å“¥ï¼ŒserviceWorkerè®²çš„æœ‰ç‚¹éšæ„äº†ï¼Œæˆ–è€…ä½ ç»™ä¸ªé“¾æ¥ä¹Ÿè¡Œï¼Œserviceworkéœ€è¦èµ·ä¸ªæœ¬åœ°æœåŠ¡ä½ æ²¡æœ‰è¯´ï¼Œç…§ç€æ•²å·®ç‚¹è¢«å®³æ­»å•Š

12

å›å¤

[![é©¬å…‹é¾™çš„å¤´åƒ](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/26/171b533d25770887~tplv-t2oaga2asx-no-mark:100:100:100:100.awebp)](https://juejin.cn/user/448256474611885)

[é©¬å…‹é¾™![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/448256474611885)

å‰ç«¯å¼€å‘3å¹´å‰

ä¸ºä»€ä¹ˆæˆ‘ä½¿ç”¨ä¸äº† Uncaught (in promise) DOMException

ç‚¹èµ

å›å¤

[![l1shuçš„å¤´åƒ](https://p26-passport.byteacctimg.com/img/user-avatar/124acb0039a82803a22b1eeec9dcd499~300x300.image)](https://juejin.cn/user/2840793776664951)

[l1shu![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/2840793776664951)

å‰ç«¯ @ TX3å¹´å‰

postMessageè¿™å—æ˜¯å†™é”™äº†å§ã€‚ã€‚
messageChanneléƒ½ä¸æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œè€Œä¸”window.parentè¿™é‡Œä¹Ÿå¾ˆå¥‡æ€ªã€‚ã€‚

3

å›å¤

[![å­—ç¬¦ä¸²çš„å¤´åƒ](https://p9-passport.byteacctimg.com/img/user-avatar/a4c7b92395940fee3c1cdc331e9ec378~300x300.image)](https://juejin.cn/user/1468603264141182)

[å­—ç¬¦ä¸²](https://juejin.cn/user/1468603264141182)

å‰ç«¯å¼€å‘3å¹´å‰

æ€ä¹ˆæ²¡æœ‰nginxåå‘ä»£ç†

2

2

[![img](https://p6-passport.byteacctimg.com/img/user-avatar/5f69de7722336bb0e17bf4934f33a710~300x300.image)](https://juejin.cn/user/2875978147963437)

[cookie-zhang![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/2875978147963437)

3å¹´å‰

å¯¹å•Š ä¸ºå•¥ä¸è®²ä¸€è®²åå‘ä»£ç†å•Š

ç‚¹èµ

å›å¤

[![img](https://p26-passport.byteacctimg.com/img/user-avatar/93ae043958cdce68701b2571fbd6214c~300x300.image)](https://juejin.cn/user/2928754708978551)

[Orimeå°çŒª![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/2928754708978551)

1å¹´å‰

è¿˜æœ‰å‰ç«¯æœ¬åœ°è®¾ç½®proxyæ­£å‘ä»£ç†ä¹Ÿæ˜¯å¸¸è§çš„éåŒæºè¯·æ±‚æ–¹å¼ä¹‹ä¸€å•Šï¼Œéƒ½æ²¡è®²ï¼Œè¯„è®ºé‡Œå­¦ä¹ å§

1

å›å¤

[![RandomYangçš„å¤´åƒ](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/2/12/170379de12453218~tplv-t2oaga2asx-no-mark:100:100:100:100.awebp)](https://juejin.cn/user/659362706621949)

[RandomYang![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/659362706621949)

å­—èŠ‚è·³åŠ¨3å¹´å‰

åº”è¯¥æ˜¯ï¼Œå…ˆæ‰“å°æ•è·å†æ‰“å°å†’æ³¡å§ï¼Ÿ

ç‚¹èµ

3

[![img](https://p9-passport.byteacctimg.com/img/mosaic-legacy/3792/5112637127~300x300.image)](https://juejin.cn/user/78820569254862)

[AaronLuo](https://juejin.cn/user/78820569254862)

3å¹´å‰

åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰“å°é¡ºåºæ˜¯æŒ‰ç…§æ³¨å†Œçš„addEventListenerçš„é¡ºåº

ç‚¹èµ

å›å¤

[![img](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/2/12/170379de12453218~tplv-t2oaga2asx-no-mark:24:24:24:24.awebp)](https://juejin.cn/user/659362706621949)

[RandomYang![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/659362706621949)

3å¹´å‰

ä½ çœ‹addEventLisnteråé¢çš„å‚æ•°true / falseã€‚ æˆ‘è¯•äº†ï¼Œä»–è¿™ä¸ªæ˜¯åçš„ã€‚ã€‚ã€‚

ç‚¹èµ

å›å¤

æŸ¥çœ‹æ›´å¤šå›å¤

[![é˜³ç„°è§…é±¼çš„å¤´åƒ](https://p26-passport.byteacctimg.com/img/user-avatar/992e2980259d480343815eb6cbb2c859~300x300.image)](https://juejin.cn/user/3773179637283271)

[é˜³ç„°è§…é±¼![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/3773179637283271)

3å¹´å‰

ä¼˜ç¼ºç‚¹å‘¢?ä¼˜ç¼ºç‚¹å‘¢?ä¼˜ç¼ºç‚¹å‘¢?ä¼˜ç¼ºç‚¹å‘¢?ä¼˜ç¼ºç‚¹å‘¢?ä¼˜ç¼ºç‚¹å‘¢?

9

å›å¤

[![fiveoneLeiçš„å¤´åƒ](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/3/19/1623cf31d0ec6022~tplv-t2oaga2asx-no-mark:100:100:100:100.awebp)](https://juejin.cn/user/1468603263624295)

[fiveoneLei![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/1468603263624295)

å‰ç«¯å·¥ç¨‹å¸ˆ @ è…¾è®¯3å¹´å‰

å‡ ç§è·¨åŸŸæ–¹å¼æœåŠ¡å™¨éƒ½å¯ä»¥è·å–è·¨åŸŸä¸­çš„cookieå—ï¼Ÿ å¸Œæœ›è¯¦ç»†è®²è§£è·¨åŸŸä¸­çš„cookieå¤„ç†

7

1

[![img](https://p26-passport.byteacctimg.com/img/user-avatar/93ae043958cdce68701b2571fbd6214c~300x300.image)](https://juejin.cn/user/2928754708978551)

[Orimeå°çŒª![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/2928754708978551)

1å¹´å‰

é»˜è®¤éƒ½ä¸å¯ä»¥æºå¸¦cookieï¼Œæœ¬æ¥cookieå°±æ˜¯åŒåŸŸç®¡ç†çš„ï¼Œå¦‚æœä¸€å®šè¦åŠ cookieå¯ä»¥è¿›è¡Œè®¾ç½®

ç‚¹èµ

å›å¤

æŸ¥çœ‹å…¨éƒ¨ 68 æ¡å›å¤