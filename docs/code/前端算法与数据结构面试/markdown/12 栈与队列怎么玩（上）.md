栈与队列相关的问题就比较微妙了，很多时候相关题目中压根不会出现“栈”、“队列”这样的关键字，但只要你深入到真题里去、对栈和队列的应用场景建立起正确的感知，那么很多线索都会在分析的过程中被你轻松地挖掘出来。

这里也和大家分享一位读者在试读过程中的学习感悟：

> 感觉算法题除了理解还要靠练习，就像高考数学题，要锻炼出解题常规思维。任重道远啊🙊

其实就是这么回事，这也正是我们开篇就跟大家指明“以题为纲”这条路的初衷。

好啦，开工了老哥们！

## 典型真题快速上手-“有效括号”问题

> 题目描述：给定一个只包括 '('，')'，'{'，'}'，'['，']' 的字符串，判断字符串是否有效。

> 有效字符串需满足：

左括号必须用相同类型的右括号闭合。
左括号必须以正确的顺序闭合。
注意空字符串可被认为是有效字符串。

> 示例 1:

输入: "()"
输出: true

> 示例 2:

输入: "()[]{}"
输出: true

> 示例 3:

输入: "(]"
输出: false

> 示例 4:

输入: "([)]"
输出: false
示例 5:
输入: "{[]}"
输出: true

### 思路分析

括号问题在面试中出现频率非常高， 这类题目我们一般首选用栈来做。

为什么可以用栈做？大家想想，括号成立意味着什么？意味着**对称性**。

巧了，根据栈的后进先出原则，一组数据的入栈和出栈顺序刚好是对称的。比如说`1、2、3、4、5、6`按顺序入栈，其对应的出栈序列就是 `6、5、4、3、2、1`：

```js
123456
654321
```

对称关系一目了然。

因此这里大家可以记下一个规律：题目中若涉及括号问题，则很有可能和栈相关。

回到题目中来，我们的思路就是在遍历字符串的过程中，往栈里 push 括号对应的配对字符。比如如果遍历到了 `(`，就往栈里 push `)`。

假如字符串中所有的括号都成立，那么前期我们 push 进去的一定全都是左括号、后期 push 进去的一定全都是右括号。而且左括号的入栈顺序，和其对应的右括号的入栈顺序应该是相反的，比如这个例子：

```
({[]})
```

最后一个入栈的左方括号`[`，与之匹配的右方括号`]`正是接下来第一个入栈的右括号。

因此，我们可以果断地认为在左括号全部入栈结束时，栈顶的那个左括号，就是第一个需要被配对的左括号。此时我们需要判断的是接下来入栈的第一个右括号是否和此时栈顶的左括号配对。如果配对成功，那么这一对括号就是有效的，否则直接 `return false`。

当判断出一对有效的括号之后，我们需要及时地丢掉它，去判断其它括号是否有效。这里这个“丢掉”的动作，就对应着两个括号一起出栈的过程。

每配对成功一对括号，我们都将这对括号出栈。这样一来，我们就可以确保栈顶的括号总是下一个需要被匹配的左括号。

如果说我们出栈到最后，栈不为空，那么意味着一部分没有被匹配上的括号被剩下来了，说明字符串中并非所有的括号都有效，判断 `false`；反之，则说明所有的括号都配对成功了，判断为 `true`。

### 编码实现

```js
// 用一个 map 来维护左括号和右括号的对应关系
const leftToRight = {
  "(": ")",
  "[": "]",
  "{": "}"
};

/**
 * @param {string} s
 * @return {boolean}
 */
const isValid = function(s) {
  // 结合题意，空字符串无条件判断为 true
  if (!s) {
    return true;
  }
  // 初始化 stack 数组
  const stack = [];
  // 缓存字符串长度
  const len = s.length;
  // 遍历字符串
  for (let i = 0; i < len; i++) {
    // 缓存单个字符
    const ch = s[i];
    // 判断是否是左括号，这里我为了实现加速，没有用数组的 includes 方法，直接手写判断逻辑
    if (ch === "(" || ch === "{" || ch === "[") stack.push(leftToRight[ch]);
    // 若不是左括号，则必须是和栈顶的左括号相配对的右括号
    else {
      // 若栈不为空，且栈顶的左括号没有和当前字符匹配上，那么判为无效
      if (!stack.length || stack.pop() !== ch) {
        return false;
      }
    }
  }
  // 若所有的括号都能配对成功，那么最后栈应该是空的
  return !stack.length;
};
```

## 栈问题进阶-每日温度问题

> 题目描述: 根据每日气温列表，请重新生成一个列表，对应位置的输出是需要再等待多久温度才会升高超过该日的天数。如果之后都不会升高，请在该位置用 0 来代替。

> 例如，给定一个列表 temperatures = [73, 74, 75, 71, 69, 72, 76, 73]，你的输出应该是 [1, 1, 4, 2, 1, 1, 0, 0]。

> 提示：气温 列表长度的范围是 [1, 30000]。每个气温的值的均为华氏度，都是在 [30, 100] 范围内的整数。

### 思路分析

看到这道题，大家不难想到暴力遍历法：直接两层遍历，第一层定位一个温度，第二层定位离这个温度最近的一次升温是哪天，然后求出两个温度对应索引的差值即可。

一个数组两层遍历，属于比较少见且高危的操作。事出反常必有妖，此时我们就需要反思：这道题是不是压根不该用暴力遍历来做？

答案是肯定的。因为在这个暴力遍历的过程中，我们其实做了很多“多余”的事情。

拿第三个索引位上这个 75 来说，我们在定位比 75 高的第一个温度的过程中，就路过了 71、69、72 这三个温度，其中，72 正是 71 对应的目标温度，可我们却像没看见它一样、啥也没干。只有等最外层遍历走到 71 时，我们才又重复了一遍刚刚走过的路、确认了 71 和 72 之间的关系——像这种不必要的重复，我们要想办法把它干掉。

**栈结构可以帮我们避免重复操作**。
避免重复操作的秘诀就是**及时地将不必要的数据出栈**，避免它对我们后续的遍历产生干扰。

拿这道题来说，我们的思路就是：**尝试去维持一个递减栈**。
当遍历过的温度，维持的是一个**单调递减**的态势时，我们就对这些温度的索引下标执行入栈操作；只要出现了一个数字，它打破了这种单调递减的趋势，也就是说它比前一个温度值高，这时我们就对前后两个温度的索引下标求差，得出前一个温度距离第一次升温的目标差值。这么说可能有点抽象，我们用一张动图来理解一下这个过程（这个过程实际有将近一分钟那么长，贴上来之后我发现完全加载不出来，这里呈现的是截止到第一个元素出栈的片段，完整的视频我这边上传到了[小破站](https://link.juejin.cn/?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV12t4y1274o%2F)）：

![温度问题的动画](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177748909c5571~tplv-t2oaga2asx-watermark.awebp)

在这个过程中，我们仅对每一个温度执行最多一次入栈操作、一次出栈操作，整个数组只会被遍历一次，因此时间复杂度就是O(n)。相对于两次遍历带来的 O(n^2)的开销来看，栈结构真是帮了咱们大忙了。

### 编码实现

```js
/**
 * @param {number[]} T
 * @return {number[]}
 */
// 入参是温度数组
const dailyTemperatures = function(T) {
    const len = T.length // 缓存数组的长度 
    const stack = [] // 初始化一个栈   
    const res = (new Array(len)).fill(0) //  初始化结果数组，注意数组定长，占位为0
    for(let i=0;i<len;i++) {
      // 若栈不为0，且存在打破递减趋势的温度值
      while(stack.length && T[i] > T[stack[stack.length-1]]) {
        // 将栈顶温度值对应的索引出栈
        const top = stack.pop()  
        // 计算 当前栈顶温度值与第一个高于它的温度值 的索引差值
        res[top] = i - top 
      }
      // 注意栈里存的不是温度值，而是索引值，这是为了后面方便计算
      stack.push(i)
    }
    // 返回结果数组
    return res 
};
```

## 栈的设计——“最小栈”问题

> 题目描述：设计一个支持 push ，pop ，top 操作，并能在常数时间内检索到最小元素的栈。

> push(x) —— 将元素 x 推入栈中。

pop() —— 删除栈顶的元素。
top() —— 获取栈顶元素。
getMin() —— 检索栈中的最小元素。

> 示例:

MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin(); --> 返回 -3.
minStack.pop();
minStack.top(); --> 返回 0.
minStack.getMin(); --> 返回 -2.

### 思路分析

这道题并不难，但是综合性很强，整个题做下来能够相对全面地考察到候选人对栈结构、栈操作的理解和掌握，是不少一面/少数二面面试官的心头好。

其中前三个操作：`push`、`pop` 和 `top`，我们在数据结构快速上手环节已经给大家讲过了，这里不多赘述。需要展开讲的是 `getMin` 这个接口，这个接口有时候会直接单独拎出来作为一道题来考察，需要大家对它的实现思路有一个真正扎实的掌握。

`getMin` 要做的事情，是从一个栈里找出其中最小的数字。我们仍然是抛砖引玉，先说一个大部分人都能想到的思路：

初始化一个最小值变量，它的初始值可以设一个非常大的数（比如 `Infinity`），然后开始遍历整个栈。在遍历的过程中，如果遇到了更小的值，就把最小值变量更新为这个更小的值。这样遍历结束后，我们就能拿到栈中的最小值了。
这个过程中，我们对栈进行了一次遍历，时间复杂度无疑是 `O(n)`。

按照这个思路，整个栈的设计我们可以这样写：

### 编码实现1

```js
/**
 * 初始化你的栈结构
 */
const MinStack = function() {
  this.stack = []
};

/** 
 * @param {number} x
 * @return {void}
 */
// 栈的入栈操作，其实就是数组的 push 方法
MinStack.prototype.push = function(x) {
  this.stack.push(x)
};

/**
 * @return {void}
 */
// 栈的入栈操作，其实就是数组的 pop 方法
MinStack.prototype.pop = function() {
  this.stack.pop()
};

/**
 * @return {number}
 */
// 取栈顶元素，咱们教过的哈，这里我本能地给它一个边界条件判断（其实不给也能通过，但是多做不错哈）
MinStack.prototype.top = function() {
  if(!this.stack || !this.stack.length) {
      return 
  }
  return this.stack[this.stack.length - 1]
};

/**
 * @return {number}
 */
// 按照一次遍历的思路取最小值
MinStack.prototype.getMin = function() {
    let minValue = Infinity  
    const  { stack } = this
    for(let i=0; i<stack.length;i++) {
        if(stack[i] < minValue) {
            minValue = stack[i]
        }
    }
    return minValue
};
```

这样写，用例也能跑通，但是不够酷。如果你在面试时这样做了，面试官有99%的可能性会追问你这句：

“这道题有没有时间效率更高的做法？”

人家都这样问了，咱当然要说“有”。然后，面试官就会搬个小板凳，坐你旁边看你如何妙手回春，变 `O(n)` 为 `O(1)`。

时间效率的提升，从来都不是白嫖，它意味着我们要付出更多的空间占用作为代价。在这道题里，如果继续沿着栈的思路往下走，我们可以考虑再搞个栈（`stack2`）出来作为辅助，让这个栈去容纳当前的最小值。

如何确保 `stack2` 能够确切地给我们提供最小值？ 这里我们需要实现的是一个从`栈底到栈顶呈递减趋势的栈`（敲黑板！递减栈出现第二次了哈）：

- 取最小值：由于整个栈从栈底到栈顶递减，因此栈顶元素就是最小元素。
- 若有新元素入栈：判断是不是比栈顶元素还要小，否则不准进入 `stack2`。
- 若有元素出栈：判断是不是和栈顶元素相等，如果是的话，`stack2` 也要出栈。

按照这个思路，我们可以有以下编码：

### 编码实现2

```js
const MinStack = function() {
    this.stack = [];
    // 定义辅助栈
    this.stack2 = [];
};

/** 
 * @param {number} x
 * @return {void}
 */
MinStack.prototype.push = function(x) {
    this.stack.push(x);
    // 若入栈的值小于当前最小值，则推入辅助栈栈顶
    if(this.stack2.length == 0 || this.stack2[this.stack2.length-1] >= x){
        this.stack2.push(x);
    }
};

/**
 * @return {void}
 */
MinStack.prototype.pop = function() {
    // 若出栈的值和当前最小值相等，那么辅助栈也要对栈顶元素进行出栈，确保最小值的有效性
    if(this.stack.pop() == this.stack2[this.stack2.length-1]){
        this.stack2.pop();
    }
};

/**
 * @return {number}
 */
MinStack.prototype.top = function() {
    return this.stack[this.stack.length-1];
};

/**
 * @return {number}
 */
MinStack.prototype.getMin = function() {
    // 辅助栈的栈顶，存的就是目标中的最小值
    return this.stack2[this.stack2.length-1];
};
```

（阅读过程中有任何想法或疑问，或者单纯希望和笔者交个朋友啥的，欢迎大家添加我的微信xyalinode与我交流哈~）

留言

![img](https://p9-passport.byteacctimg.com/img/user-avatar/5e41ee1c076d80557fa78839ed4c71c7~300x300.image)

发表评论

全部评论（65）

[![冷0的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/2471357871312110)

[冷0![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/2471357871312110)

23天前

这边是且还是或，不太清楚啊

![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)

点赞

回复

[![江涛学编程的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/2928754707669463)

[江涛学编程![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/2928754707669463)

前端开发26天前

如果可以用语言特性的话， Math.min.apply一把梭哈哈哈

![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)

点赞

回复

[![听话不听话的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/2330620382943607)

[听话不听话](https://juejin.cn/user/2330620382943607)

前端2月前

第一题，回文字符串

点赞

回复

[![没有昵称请重新填写的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3386151545611511)

[没有昵称请重新填写![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/3386151545611511)

搬砖 @ 猕猴桃公司2月前

不用stack2，用一个对象记录也可以吧，{最小值:index}

点赞

1

[![img](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf507c6f422d451eb71775da0df8a381~tplv-k3u1fbpfcp-no-mark:100:100:100:100.awebp?)](https://juejin.cn/user/1011980556569799)

[Rita命](https://juejin.cn/user/1011980556569799)

1月前

那样的话，执行pop操作，如果把最小值出栈了，后面就没法再找最小值了

2

回复

[![感觉时刻的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1081575171434743)

[感觉时刻](https://juejin.cn/user/1081575171434743)

前端2月前

赞，通俗易懂

点赞

回复

[![敲代码的小提琴手的头像](https://p6-passport.byteacctimg.com/img/user-avatar/04b6e7f7165675b6b6da949513fecaaa~300x300.image)](https://juejin.cn/user/18064101621133)

[敲代码的小提琴手![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/18064101621133)

前端开发练习生 @ JDT3月前

这个最小栈 [![img](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/3f843e8626a3844c624fb596dddd9674.svg)leetcode-cn.com](https://link.juejin.cn/?target=https%3A%2F%2Fleetcode-cn.com%2Fproblems%2Fmin-stack%2F) 太漂亮了！点个赞！对设计题总算有点自信了（虽然是easy嘿嘿）

1

回复

[![Soulkey的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3958685947402717)

[Soulkey![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/3958685947402717)

研究生4月前

打卡 冲！

点赞

回复

[![不看完不改名_前端算法与数据结构小册子的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1987524937385704)

[不看完不改名_前端算法与数据结构小册子![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/1987524937385704)

前端5月前

打卡

点赞

回复

[![iJay的头像](https://p26-passport.byteacctimg.com/img/user-avatar/4c9331d2ecd7c5e1e273af217533c550~300x300.image)](https://juejin.cn/user/3474112473729831)

[iJay](https://juejin.cn/user/3474112473729831)

前端开发6月前

冲冲冲，哈撒给～

点赞

回复

[![ng_kp的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3869904783291102)

[ng_kp![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/3869904783291102)

前端开发6月前

getMin 感觉有问题，stack2和stack的长度是不对等的，当stack2因为出栈操作变为空的时候，就获取不到最小值了

点赞

2

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/3869904783291102)

[ng_kp![lv-2](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/f597b88d22ce5370bd94495780459040.svg)](https://juejin.cn/user/3869904783291102)

6月前

![😂](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/asset/twemoji/2.6.0/svg/1f602.svg~tplv-t2oaga2asx-image.image)没问题，想明白了

点赞

回复

[![img](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/536217405627246)

[前程明亮![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/536217405627246)

6月前

stack2和stack1长度相等，其实更简单，只需要在push的时候做下处理，[![img](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/3f843e8626a3844c624fb596dddd9674.svg)leetcode-cn.com](https://link.juejin.cn/?target=https%3A%2F%2Fleetcode-cn.com%2Fproblems%2Fmin-stack%2Fsolution%2Ffu-zhu-zhan-zui-xiao-zhan-by-demigodliu-wnpk%2F)

点赞

回复

[![生锈的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1996368847313662)

[生锈](https://juejin.cn/user/1996368847313662)

7月前

第二题: 题目描述的迷惑点是 75 会输出4, 只要看下数组内有没有比75更大的值, 有的话, 算下从75到76要走了几位, 位数就是天数, 其它的类推

点赞

回复

[![Mr.HoTwo的头像](https://p9-passport.byteacctimg.com/img/mosaic-legacy/3795/3047680722~300x300.image)](https://juejin.cn/user/976022054633998)

[Mr.HoTwo](https://juejin.cn/user/976022054633998)

7月前

冲鸭~~

点赞

回复

[![Winneyliu的头像](https://p3-passport.byteacctimg.com/img/user-avatar/cc3735756cc614aa0d6e4590e27702e3~300x300.image)](https://juejin.cn/user/3984285869282952)

[Winneyliu](https://juejin.cn/user/3984285869282952)

前端开发7月前

第二题还是不懂

点赞

回复

[![柠致的头像](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC)](https://juejin.cn/user/1503787640168696)

[柠致](https://juejin.cn/user/1503787640168696)

前端 @ 广东工业大学8月前

【有效括号】： 出入栈的对称性 ===》 “从外往内” push右括号，“从内往外” 匹配（pop）右括号； 【每日温度】： 维持一个温度递减 的 对应的索引值 的栈，栈的索引元素 对应着 res结果数组的索引， 当前遍历索引值 - 栈顶索引元素 === 最近升温所需天数； 【设计最小栈】： 通过【栈底到栈顶呈递减趋势的栈】（递减栈），降低时间复杂度 O(n) ---> O(1) ；

点赞

回复

[![宇瞬的头像](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/mirror-assets/169a0fe1fcc2c86f226~tplv-t2oaga2asx-no-mark:100:100:100:100.awebp)](https://juejin.cn/user/219558057358237)

[宇瞬](https://juejin.cn/user/219558057358237)

前端开发8月前

我这样写也可以完美实现![😂](https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/asset/twemoji/2.6.0/svg/1f602.svg~tplv-t2oaga2asx-image.image)，有没有大佬点评一下写的咋样，有啥弊端没？

![img](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b19b00fc44640c3976dbcc2b6e3f207~tplv-k3u1fbpfcp-no-mark:320:320:320:320.awebp)

点赞

2

[![img](https://p6-passport.byteacctimg.com/img/user-avatar/50e361157e9679d12414bcad4950321c~300x300.image)](https://juejin.cn/user/3456520289007917)

[田所浩二![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/3456520289007917)

8月前

sort等于遍历整个栈，时间复杂度又回到O(n)了

点赞

回复

[![img](https://p26-passport.byteacctimg.com/img/user-avatar/2728f093a6c85f4133cf0bc133f0e527~300x300.image)](https://juejin.cn/user/1134351728254199)

[月白白![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/1134351728254199)

1月前

这种要求最简单就不要引入其他api

点赞

回复

[![bigdriedfish的头像](https://p26-passport.byteacctimg.com/img/mosaic-legacy/3793/3131589739~300x300.image)](https://juejin.cn/user/2154698523281719)

[bigdriedfish](https://juejin.cn/user/2154698523281719)

8月前

这里最高温度那块看了好久还是看不懂，有大佬说说嘛

点赞

1

[![img](https://p3-passport.byteacctimg.com/img/user-avatar/47df97aeda8c0e1c927e32a5f62ae1a8~300x300.image)](https://juejin.cn/user/1503787640168696)

[柠致](https://juejin.cn/user/1503787640168696)

8月前

不是最高温度，而是 每日温度的最近升温的所需天数。 1、栈的索引元素 对应着 res结果数组的索引， 当前遍历索引值 - 栈顶索引元素 === 最近升温所需天数； 2、维持一个温度递减 的 对应的索引值 的栈； 3、对比于两次暴力遍历， 递减栈的 入栈与出栈的灵活性（每个数组元素最多一次入栈和一次出栈）可以避免很多重复操作， 一次遍历可以完成所有操作。

点赞

回复

[![nan的头像](https://p3-passport.byteacctimg.com/img/user-avatar/9f71dbd140e7d5be30004f751b98dbfd~300x300.image)](https://juejin.cn/user/4248168661526152)

[nan![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/4248168661526152)

8月前

获取栈中最小值那个地方，方法二，加入辅助栈的条件是，当前值小于辅助栈中最小值，要是他连续出栈，是不是有问题，辅助栈应该是都加入，并排序好一点吧

点赞

1

[![img](https://p9-passport.byteacctimg.com/img/user-avatar/c4237bf9db95f6f448a53fa3aca82c8d~300x300.image)](https://juejin.cn/user/325111173087358)

[yzzhou](https://juejin.cn/user/325111173087358)

5月前

连续出栈，两种情况，出栈的值大于辅助栈最小值，那直接出栈，辅助栈不需要变动；如果出栈值等于辅助栈最小值，同时出栈

点赞

回复

[![三只萌新的头像](https://p6-passport.byteacctimg.com/img/user-avatar/e0b5f9037651df856ffe68f9ac89bb32~300x300.image)](https://juejin.cn/user/360295544400973)

[三只萌新![lv-3](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e108c685147dfe1fb03d4a37257fb417.svg)](https://juejin.cn/user/360295544400973)

前端9月前

打卡

点赞

回复

[![bigFace的头像](https://p3-passport.byteacctimg.com/img/user-avatar/9ad5a7cb1c4dac4b012cab2bc398b1d4~300x300.image)](https://juejin.cn/user/2374545331721256)

[bigFace![lv-1](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/636691cd590f92898cfcda37357472b8.svg)](https://juejin.cn/user/2374545331721256)

10月前

升温那个问题是这样的：过几天才会升温，比如第一天73度，过一天就74度了。所以有temperatures = [73, 74, 75, 71, 69, 72, 76, 73]，你的输出应该是 [1, 1, 4, 2, 1, 1, 0, 0]。

点赞

回复

[![Wneil的头像](https://p9-passport.byteacctimg.com/img/mosaic-legacy/3792/5112637127~300x300.image)](https://juejin.cn/user/1169536100344702)

[Wneil](https://juejin.cn/user/1169536100344702)

11月前

栈: 最小栈, 每日温度, 有效括号

点赞

回复

查看全部 65 条回复